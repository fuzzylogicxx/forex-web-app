<div class="container">

  <%= form_tag(rates_path, method: :get) do %>
    <%= number_field_tag :amount, (params[:amount] or 100) %>
    <%= submit_tag 'Get Rates', name: nil %>
  <% end %>

  <h2>Latest Rates</h2>
  <p>Select any two currency rows to launch our 5-day comparison tool.</p>
  
  <table id="latest-rates-table">
    <thead>
      <tr>
        <th>Currency</th>
        <th>Amount</th>
      </tr>
    </thead>
    <tbody>
      <% @rates['rates'].each do |key, value| %>
        <tr data-currency="<%= key.to_s %>">
          <td><%=h "#{key.to_s}" %></td>
          <td><%= '%.2f' % (value.to_f * (params[:amount] or 100).to_f) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

</div> <!-- /.container -->

<script>
  // Save today’s rates to a JS object so we only need to fetch the previous days’ rates.
  const ratesToday = <%= raw(@rates['rates'].to_json) %>;
</script>

<!-- Modal elements are hidden by default so no negative impact on those using assistive technology -->
<div class="modal-overlay closed" id="modal-overlay"></div>
<div class="modal closed" id="modal">
  <button class="close-button" id="close-button">Close</button>
  <div class="modal-body" id="modal-body"></div>
</div>

